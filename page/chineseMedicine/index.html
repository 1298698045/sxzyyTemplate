<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1300px">
    <title>{ms:global.name/}</title>
    <link rel="stylesheet" href="{ms:global.host/}/{ms:global.style/}/css/swiper-3.4.2.min.css">
    <link rel="stylesheet" href="{ms:global.host/}/{ms:global.style/}/css/public.css">
    <link rel="stylesheet" href="{ms:global.host/}/{ms:global.style/}/css/head.css">
    <link rel="stylesheet" href="{ms:global.host/}/{ms:global.style/}/css/footer.css">
    <link rel="stylesheet" href="{ms:global.host/}/{ms:global.style/}/css/chineseMedicine.css">
    <script type="text/javascript" src="${base}/static/plugins/vue/2.6.9/vue.min.js"></script>
</head>
<body>
    <div id="app" class="wrap" v-cloak>
        <#include "head.html" />
        <#include "right.html" />
        <div class="maxImage">
            <div class="max_img_content">
                <#include "location.html" />
                <div class="layOut_panel">
                    <div class="l_img"></div>
                    <div class="r_cont_wrap">
                        <div class="flex">
                            {ms:arclist artid='1407272821952983041'}
                            <div class="preview">
                                <i class="icon top_icon"></i>
                                <p class="text" @click="goto('{ms:global.url/}${field.link}')">查看详细</p>
                                <i class="icon bottom_icon"></i>
                            </div>
                            
                            <div class="article">
                                <p class="column">
                                    ${field.descrip}
                                </p>
                            </div>
                            <div class="tag">
                                <div class="text">
                                    <div class="topBack"></div>
                                    ${field.title}
                                    <div class="bottomBack">
                                        <span class="dept"></span>
                                    </div>
                                </div>
                            </div>
                            {/ms:arclist}

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="center">
            <div class="row_title">
                <div class="imgs">
                    <img src="{ms:global.host/}/{ms:global.style/}/images/01.png" alt="">
                </div>
                {ms:channel type='self' typeid='1400728746929844226'}
                <p class="name">${field.typetitle}</p>
                {/ms:channel}
                <div class="imgs">
                    <img src="{ms:global.host/}/{ms:global.style/}/images/02.png" alt="">
                </div>
                {ms:channel type='self' typeid='1400728746929844226'}
                <p class="more" id="displayId" @click="goto('<#if field.type==3>{ms:global.url/}${field.typeurl}<#else>{ms:global.url/}${field.typelink}</#if>')">
                    更多查看
                </p>
                {/ms:channel}
            </div>
            {ms:channel type='self' typeid='1400728746929844226'}
            <div class="features marginAuto">
                <div class="dynamic" id="featuresId">
                    {ms:arclist size=3}
                    <div class="box">
                        <div class="box_child">
                            <div class="img">
                                <img class="imgurl" src="{ms:global.host/}{@ms:file field.litpic/}"/>      
                                <div class="modal">
                                    <p class="add_icon"></p>    
                                </div>
                            </div>
                            <div class="text_Wrap">
                                <p class="text">
                                    ${field.title}
                                </p>
                            </div>
                        </div>
                    </div>
                    {/ms:arclist}
                </div>
            </div>
            {/ms:channel}
            <div class="row_title">
                <div class="imgs">
                    <img src="{ms:global.host/}/{ms:global.style/}/images/01.png" alt="">
                </div>
                {ms:channel type='self' typeid='1400729195212861442'}
                <p class="name">${field.typetitle}</p>
                {/ms:channel}
                <div class="imgs">
                    <img src="{ms:global.host/}/{ms:global.style/}/images/02.png" alt="">
                </div>
                {ms:channel type='self' typeid='1400729195212861442'}
                <p class="more" id="ztVideo" @click="goto('<#if field.type==3>{ms:global.url/}${field.typeurl}<#else>{ms:global.url/}${field.typelink}</#if>')">
                    更多查看
                </p>
                {/ms:channel}
            </div>
            {ms:channel type='self' typeid='1400729195212861442'}
            <div class="videoWrap marginAuto">
                <div class="dynamic" id="videoId">
                    {ms:arclist size=3}
                    <#if field.flag='tv'>
                    <div class="box" attrContent='${field.content}'>
                        <div class="box_child">
                            <div class="img">
                                <img class="imgurl" src="{ms:global.host/}{@ms:file field.litpic/}"/>      
                                <p class="play_icon"></p>
                            </div>
                            <div class="textWrap">
                                <p class="text">
                                    ${field.title}
                                </p>
                            </div>
                        </div>
                    </div>
                    <#else>
                    <div class="box" @click="goto('{ms:global.url/}${field.link}')">
                        <div class="box_child">
                            <div class="img">
                                <img class="imgurl" src="{ms:global.host/}{@ms:file field.litpic/}"/>      
                                <p class="play_icon"></p>
                            </div>
                            <div class="textWrap">
                                <p class="text">
                                    ${field.title}
                                </p>
                            </div>
                        </div>
                    </div>
                    </#if>
                    {/ms:arclist}
                </div>
            </div>
            {/ms:channel}
            <div class="row_title">
                <div class="imgs">
                    <img src="{ms:global.host/}/{ms:global.style/}/images/01.png" alt="">
                </div>
                {ms:channel type='self' typeid='1400729393410502658'}
                <p class="name">${field.typetitle}</p>
                {/ms:channel}
                <div class="imgs">
                    <img src="{ms:global.host/}/{ms:global.style/}/images/02.png" alt="">
                </div>
                {ms:channel type='self' typeid='1400729393410502658'}
                <p class="more" id="therapy" @click="goto('<#if field.type==3>{ms:global.url/}${field.typeurl}<#else>{ms:global.url/}${field.typelink}</#if>')">
                    更多查看
                </p>
                {/ms:channel}
            </div>
            {ms:channel type='self' typeid='1400729393410502658'}
            <div class="videoWrap marginAuto">
                <div class="dynamic" id="videoIdTow">
                    {ms:arclist size=3 orderby='date'}
                    <#if field.flag='tv'>
                    <div class="box" attrContent='${field.content}'>
                        <div class="box_child">
                            <div class="img">
                                <img class="imgurl" src="{ms:global.host/}{@ms:file field.litpic/}"/>      
                                <p class="play_icon"></p>
                            </div>
                            <div class="textWrap">
                                <p class="text">
                                    ${field.title}
                                </p>
                            </div>
                        </div>
                    </div>
                    <#else>
                    <div class="box" @click="goto('{ms:global.url/}${field.link}')">
                        <div class="box_child">
                            <div class="img">
                                <img class="imgurl" src="{ms:global.host/}{@ms:file field.litpic/}"/>      
                                <p class="play_icon"></p>
                            </div>
                            <div class="textWrap">
                                <p class="text">
                                    ${field.title}
                                </p>
                            </div>
                        </div>
                    </div>
                    </#if>
                    {/ms:arclist}
                </div>
            </div>
            {/ms:channel}
        </div>
        <#include "foot.html" />
        <div class="modal_modal">
            <div class="popupWrap">
                {ms:channel type='self' typeid='1400728746929844226'}
                <div class="block">
                    <div class="swiper-container_modal">
                        <div class="swiper-wrapper">
                            {ms:arclist size=3}
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="{ms:global.host/}{@ms:file field.litpic/}" alt="">
                                </div>
                                <div class="row">
                                    <p class="title">${field.title}</p>
                                    <p class="cancel modal_cancel"></p>
                                </div>
                            </div>
                            {/ms:arclist}
                        </div>
                        <div >
                            <div class="swiper-button-prev"></div>
                            <div class="swiper-button-next"></div>
                        </div>
                    </div>
                    
                </div>
                {/ms:channel}
            </div>
        </div>
    </div>
</body>
<script src="{ms:global.host/}/{ms:global.style/}/js/jquery.js"></script>
<script src="{ms:global.host/}/{ms:global.style/}/js/swiper-3.4.2.min.js"></script>
<script src="{ms:global.host/}/{ms:global.style/}/utils/head.js"></script>
<script src="{ms:global.host/}/{ms:global.style/}/js/app.js"></script>
<script src="{ms:global.host/}/{ms:global.style/}/utils/footer.js"></script>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            typePath: '<#if field.typeid?has_content>${field.typeid}<#if field.parentids?has_content>,${field.parentids}</#if><#else>0</#if>'
        },
        mixins: [mixin],
        methods: {}
    })

    window.onload = function(){
        let boxsOne = $('#videoId .box');
        for(let i = 0; i < boxsOne.length; i++){
            if($('#videoId .box').eq(i).attr('attrContent')){
                let link  = getSimpleText($('#videoId .box').eq(i).attr('attrContent'));
                $('#videoId .box').eq(i).click(function(){
                    window.open(link)
                })
            }
        }
        let boxs = $('#videoIdTow .box');
        for(let i = 0; i < boxs.length; i++){
            if($('#videoIdTow .box').eq(i).attr('attrContent')){
                let link  = getSimpleText($('#videoIdTow .box').eq(i).attr('attrContent'));
                $('#videoIdTow .box').eq(i).click(function(){
                    window.open(link)
                })
            }
        }
        function getSimpleText(html){
            var re1 = new RegExp("<.+?>","g");//匹配html标签的正则表达式，"g"是搜索匹配多个符合的内容
            var msg = html.replace(re1,'');//执行替换成空字符
            return msg;
        }
    }

    $(function(){
        // 陈列展示
        let list = [
            {
                imgUrl:"{ms:global.host/}/{ms:global.style/}/images/t5.jpg",
                name:"人文始祖伏羲、神农展厅"
            },
            {
                imgUrl:"{ms:global.host/}/{ms:global.style/}/images/t6.jpg",
                name:"旧石器时代遗址及出土文物"
            },
            {
                imgUrl:"{ms:global.host/}/{ms:global.style/}/images/t7.jpg",
                name:"国医源流展厅（黄帝）"
            }
        ]
        $('.modal_cancel').click(function(){
            $('.modal_modal').hide();
        })
        var mySwiper1 = new Swiper ('.swiper-container_modal', {
            slidesPerView: 1,
            initialSlide :0,
            paginationClickable:true,
            pagination: '.swiper-pagination',
            nextButton: '.swiper-button-next',
            prevButton: '.swiper-button-prev',
            onSlideChangeEnd: function(swiper){
                if(swiper.isBeginning){
                    swiper.prevButton.removeClass('active');
                }else{
                    swiper.prevButton.addClass('active');
                }
            }
        })  
        function modalSwiperFun(idx){
            mySwiper1.init();
            mySwiper1.slideTo(idx, 0, false);
        }
        $('#featuresId .box').click(function(){
            let idx = $(this).index();
            $('.modal_modal').show();
            modalSwiperFun(idx);
        })
        $('.modal_cancel').click(function(){
            $('.modal_modal').hide();
        })
    })
</script>
</html>
